trigger:
- main

pool:
  vmImage: ubuntu-latest

steps:
- task: NodeTool@0
  displayName: "Setup"
  inputs:
    versionSource: 'spec'
    versionSpec: '12.x'

- script: 'npm install'
  displayName: "Instala dependências"

- script: 'npm run test'
  displayName: "Executa os testes"

- task: PublishTestResults@2
  displayName: "Gera um relatório"
  inputs:
    testResultsFormat: 'JUnit'
    testResultsFiles: '**/TEST-*.xml'  # Adjust this pattern based on your test runner's output
